# Phase 3: Advanced Analytics & AI Features - Comprehensive Testing

### Variables
@baseUrl = http://localhost:5111
@token = {{login.response.body.token}}

### 1. Login as Admin (Required for AI Analytics endpoints)
POST {{baseUrl}}/api/auth/login
Content-Type: application/json

{
  "username": "admin",
  "password": "Admin123!"
}

### 2. Get AI-Powered Insights Dashboard
GET {{baseUrl}}/api/AdvancedAnalytics/dashboard/ai-insights
Authorization: Bearer {{token}}

### 3. Generate Advanced Predictions - Sales Department Efficiency
POST {{baseUrl}}/api/AdvancedAnalytics/predictions/advanced
Authorization: Bearer {{token}}
Content-Type: application/json

{
  "metric": "efficiency",
  "department": "Sales",
  "forecastPeriods": 6,
  "algorithm": "auto"
}

### 4. Predict Multi-Department Performance
POST {{baseUrl}}/api/AdvancedAnalytics/predictions/department-performance
Authorization: Bearer {{token}}
Content-Type: application/json

{
  "departments": ["Sales", "Marketing", "Operations", "HR"],
  "forecastMonths": 6
}

### 5. Generate Budget Forecast with AI
GET {{baseUrl}}/api/AdvancedAnalytics/predictions/budget-forecast/Sales?forecastMonths=12
Authorization: Bearer {{token}}

### 6. Predict Resource Requirements
GET {{baseUrl}}/api/AdvancedAnalytics/predictions/resource-requirements/Operations?targetDate=2025-12-31
Authorization: Bearer {{token}}

### 7. Detect Anomalies in Efficiency Metrics
GET {{baseUrl}}/api/AdvancedAnalytics/anomalies/detect/efficiency?startDate=2025-01-01&endDate=2025-08-09
Authorization: Bearer {{token}}

### 8. Generate Automated Anomaly Alerts
GET {{baseUrl}}/api/AdvancedAnalytics/anomalies/alerts
Authorization: Bearer {{token}}

### 9. Assess Data Quality for Reports
GET {{baseUrl}}/api/AdvancedAnalytics/data-quality/assess/reports
Authorization: Bearer {{token}}

### 10. Identify Seasonal Patterns in Revenue
GET {{baseUrl}}/api/AdvancedAnalytics/patterns/seasonal/revenue?lookbackMonths=24
Authorization: Bearer {{token}}

### 11. Find Metric Correlations
POST {{baseUrl}}/api/AdvancedAnalytics/patterns/correlations
Authorization: Bearer {{token}}
Content-Type: application/json

{
  "metrics": ["efficiency", "budget_utilization", "completion_rate", "quality_score"]
}

### 12. Cluster Departments by Performance
GET {{baseUrl}}/api/AdvancedAnalytics/patterns/department-clusters
Authorization: Bearer {{token}}

### 13. Analyze Sentiment in Text Data
POST {{baseUrl}}/api/AdvancedAnalytics/nlp/sentiment-analysis
Authorization: Bearer {{token}}
Content-Type: application/json

{
  "textData": [
    "The team performed excellently this quarter with outstanding results",
    "We are very satisfied with the project outcome and quality",
    "There were some challenges but overall good progress",
    "The department needs improvement in several areas",
    "Poor performance and missed deadlines caused issues"
  ]
}

### 14. Extract AI Insights from Documents
POST {{baseUrl}}/api/AdvancedAnalytics/nlp/extract-insights
Authorization: Bearer {{token}}
Content-Type: application/json

{
  "documents": [
    "Q3 performance showed significant improvements in efficiency and cost reduction",
    "Budget utilization remained within acceptable ranges with minor overruns in training",
    "Staff satisfaction surveys indicate high morale and engagement levels",
    "Technology upgrades contributed to productivity gains across departments",
    "Customer feedback shows increased satisfaction with service quality"
  ]
}

### 15. Generate Automated Report Summary
POST {{baseUrl}}/api/AdvancedAnalytics/nlp/generate-summary
Authorization: Bearer {{token}}
Content-Type: application/json

{
  "reportData": [
    "Department efficiency increased by 15% compared to last quarter",
    "Budget utilization is at 87% with good cost control measures",
    "Three major projects completed ahead of schedule",
    "Staff training programs showed positive impact on performance",
    "Customer satisfaction scores improved by 12 points",
    "Risk mitigation strategies successfully implemented"
  ]
}

### 16. Perform Multivariate Analysis
POST {{baseUrl}}/api/AdvancedAnalytics/advanced/multivariate-analysis
Authorization: Bearer {{token}}
Content-Type: application/json

{
  "datasets": {
    "efficiency": [85.2, 87.1, 89.3, 91.0, 88.7, 90.2],
    "budget_utilization": [78.5, 82.1, 85.3, 87.9, 83.2, 86.1],
    "staff_satisfaction": [4.2, 4.5, 4.7, 4.6, 4.4, 4.8],
    "customer_satisfaction": [8.1, 8.3, 8.7, 8.9, 8.5, 8.8]
  }
}

### 17. Generate What-If Scenarios
POST {{baseUrl}}/api/AdvancedAnalytics/advanced/scenario-analysis
Authorization: Bearer {{token}}
Content-Type: application/json

{
  "parameters": {
    "budget_increase": 15.0,
    "staff_addition": 3.0,
    "training_investment": 25000.0,
    "technology_upgrade": 50000.0
  }
}

### 18. Optimize Resource Allocation
POST {{baseUrl}}/api/AdvancedAnalytics/advanced/optimize-resources
Authorization: Bearer {{token}}
Content-Type: application/json

{
  "departments": ["Sales", "Marketing", "Operations", "HR"],
  "constraints": {
    "total_budget": 500000.0,
    "max_staff_per_dept": 15.0,
    "min_efficiency_target": 85.0
  }
}

### 19. Get AI-Generated Recommendations
GET {{baseUrl}}/api/AdvancedAnalytics/recommendations/ai-generated
Authorization: Bearer {{token}}

### 20. Test Advanced Prediction with Different Algorithms

# Linear Regression
POST {{baseUrl}}/api/AdvancedAnalytics/predictions/advanced
Authorization: Bearer {{token}}
Content-Type: application/json

{
  "metric": "revenue",
  "department": "Sales",
  "forecastPeriods": 12,
  "algorithm": "linear_regression"
}

### 21. ARIMA Algorithm Prediction
POST {{baseUrl}}/api/AdvancedAnalytics/predictions/advanced
Authorization: Bearer {{token}}
Content-Type: application/json

{
  "metric": "efficiency",
  "department": "Operations",
  "forecastPeriods": 6,
  "algorithm": "arima"
}

### 22. Seasonal ARIMA Prediction
POST {{baseUrl}}/api/AdvancedAnalytics/predictions/advanced
Authorization: Bearer {{token}}
Content-Type: application/json

{
  "metric": "sales_volume",
  "department": "Sales",
  "forecastPeriods": 12,
  "algorithm": "seasonal_arima"
}

### 23. Exponential Smoothing Prediction
POST {{baseUrl}}/api/AdvancedAnalytics/predictions/advanced
Authorization: Bearer {{token}}
Content-Type: application/json

{
  "metric": "customer_satisfaction",
  "department": "Customer Service",
  "forecastPeriods": 6,
  "algorithm": "exponential_smoothing"
}

### 24. Comprehensive AI Analytics Validation
# Test all major AI features in sequence

# Step 1: Get baseline analytics
GET {{baseUrl}}/api/analytics/dashboard
Authorization: Bearer {{token}}

### Step 2: Get AI enhancement
GET {{baseUrl}}/api/AdvancedAnalytics/dashboard/ai-insights
Authorization: Bearer {{token}}

### Step 3: Compare traditional vs AI predictions
GET {{baseUrl}}/api/analytics/predictions/Sales/efficiency?forecastPeriods=6
Authorization: Bearer {{token}}

### Step 4: Get AI-enhanced predictions
POST {{baseUrl}}/api/AdvancedAnalytics/predictions/advanced
Authorization: Bearer {{token}}
Content-Type: application/json

{
  "metric": "efficiency",
  "department": "Sales",
  "forecastPeriods": 6,
  "algorithm": "auto"
}

### 25. Performance Monitoring and Validation

# Monitor API response times and accuracy
GET {{baseUrl}}/api/AdvancedAnalytics/dashboard/ai-insights
Authorization: Bearer {{token}}

### Test Error Handling

# Test with invalid department
POST {{baseUrl}}/api/AdvancedAnalytics/predictions/advanced
Authorization: Bearer {{token}}
Content-Type: application/json

{
  "metric": "efficiency",
  "department": "NonExistentDept",
  "forecastPeriods": 6,
  "algorithm": "auto"
}

### Test with invalid algorithm
POST {{baseUrl}}/api/AdvancedAnalytics/predictions/advanced
Authorization: Bearer {{token}}
Content-Type: application/json

{
  "metric": "efficiency",
  "department": "Sales",
  "forecastPeriods": 6,
  "algorithm": "invalid_algorithm"
}

### Integration Test - Full AI Workflow
# This tests the complete AI analytics pipeline

# 1. Get AI dashboard
GET {{baseUrl}}/api/AdvancedAnalytics/dashboard/ai-insights
Authorization: Bearer {{token}}

# 2. Generate predictions
POST {{baseUrl}}/api/AdvancedAnalytics/predictions/department-performance
Authorization: Bearer {{token}}
Content-Type: application/json

{
  "departments": ["Sales", "Marketing"],
  "forecastMonths": 3
}

# 3. Detect anomalies
GET {{baseUrl}}/api/AdvancedAnalytics/anomalies/detect/efficiency
Authorization: Bearer {{token}}

# 4. Get recommendations
GET {{baseUrl}}/api/AdvancedAnalytics/recommendations/ai-generated
Authorization: Bearer {{token}}

### Performance Benchmarking
# Measure AI analytics performance vs traditional analytics

# Traditional analytics call
GET {{baseUrl}}/api/analytics/dashboard
Authorization: Bearer {{token}}

# AI analytics call
GET {{baseUrl}}/api/AdvancedAnalytics/dashboard/ai-insights
Authorization: Bearer {{token}}

# Compare response times and data richness
