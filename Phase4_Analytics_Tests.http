### Phase 4 - Analytics & Dashboard API Tests

### 1. First, get authentication token
POST http://localhost:5111/api/auth/login
Content-Type: application/json

{
  "username": "admin@example.com",
  "email": "admin@example.com",
  "password": "Admin123!",
  "rememberMe": true
}

### 2. Test Executive Dashboard (Replace {{token}} with actual JWT token from login)
GET http://localhost:5111/api/analytics/dashboard
Authorization: Bearer {{token}}

### 3. Test Company Overview
GET http://localhost:5111/api/analytics/overview
Authorization: Bearer {{token}}

### 4. Test Department Summaries
GET http://localhost:5111/api/analytics/departments/summary
Authorization: Bearer {{token}}

### 5. Test Key Metrics
GET http://localhost:5111/api/analytics/metrics
Authorization: Bearer {{token}}

### 6. Test Critical Alerts
GET http://localhost:5111/api/analytics/alerts?limit=5
Authorization: Bearer {{token}}

### 7. Test Recent Trends
GET http://localhost:5111/api/analytics/trends?metrics=efficiency&metrics=budget_utilization&days=30
Authorization: Bearer {{token}}

### 8. Test Financial KPIs
GET http://localhost:5111/api/analytics/kpis/financial
Authorization: Bearer {{token}}

### 9. Test Operational KPIs
GET http://localhost:5111/api/analytics/kpis/operational
Authorization: Bearer {{token}}

### 10. Test HR KPIs
GET http://localhost:5111/api/analytics/kpis/hr
Authorization: Bearer {{token}}

### 11. Test Efficiency Score for Finance Department
GET http://localhost:5111/api/analytics/efficiency/Finance
Authorization: Bearer {{token}}

### 12. Test Revenue Analytics
GET http://localhost:5111/api/analytics/business-intelligence/revenue
Authorization: Bearer {{token}}

### 13. Test Cost Analytics
GET http://localhost:5111/api/analytics/business-intelligence/costs
Authorization: Bearer {{token}}

### 14. Test Productivity Metrics
GET http://localhost:5111/api/analytics/business-intelligence/productivity
Authorization: Bearer {{token}}

### 15. Test Export to PDF
POST http://localhost:5111/api/export/pdf
Authorization: Bearer {{token}}
Content-Type: application/json

{
  "reportType": "executive_dashboard",
  "format": "pdf",
  "startDate": "2025-01-01",
  "endDate": "2025-01-31",
  "includeCharts": true,
  "includeSummary": true,
  "fileName": "Executive_Dashboard_Report"
}

### 16. Test Export to Excel
POST http://localhost:5111/api/export/excel
Authorization: Bearer {{token}}
Content-Type: application/json

{
  "reportType": "departmental",
  "format": "excel",
  "departments": ["Finance", "HR", "Operations"],
  "includeFields": ["all"],
  "fileName": "Multi_Department_Report"
}

### 17. Test Export to CSV
POST http://localhost:5111/api/export/csv
Authorization: Bearer {{token}}
Content-Type: application/json

{
  "reportType": "metrics",
  "format": "csv",
  "startDate": "2025-01-01",
  "endDate": "2025-01-31",
  "fileName": "KPI_Metrics_Report"
}

### 18. Test Send Email Notification
POST http://localhost:5111/api/export/email/send
Authorization: Bearer {{token}}
Content-Type: application/json

{
  "toEmail": "biyelaayanda3@gmail.com",
  "subject": "Phase 4 Test - Analytics Dashboard Report",
  "body": "<h2>Phase 4 Analytics Implementation Complete!</h2><p>The Multi-Department Reporting Tool now includes:</p><ul><li>Executive Dashboard with real-time KPIs</li><li>Advanced Analytics and Trend Analysis</li><li>Predictive Analytics</li><li>Multi-format Export (PDF, Excel, CSV, JSON)</li><li>Email Notifications and Scheduled Reports</li><li>Interactive Charts and Data Visualization</li></ul><p>Best regards,<br>Multi-Department Reporting Tool</p>",
  "isHtml": true,
  "priority": "High"
}

### 19. Test Create Alert
POST http://localhost:5111/api/analytics/alerts
Authorization: Bearer {{token}}
Content-Type: application/json

{
  "title": "Phase 4 Implementation Complete",
  "message": "All Phase 4 Analytics and Export features have been successfully implemented and tested.",
  "severity": "Info",
  "department": "IT",
  "responsibleUser": "biyelaayanda3@gmail.com"
}

### 20. Test Create Scheduled Report
POST http://localhost:5111/api/export/scheduled
Authorization: Bearer {{token}}
Content-Type: application/json

{
  "name": "Weekly Executive Dashboard",
  "description": "Weekly automated executive dashboard report with analytics",
  "reportType": "dashboard",
  "frequency": "weekly",
  "recipients": ["biyelaayanda3@gmail.com"],
  "exportSettings": {
    "reportType": "executive_dashboard",
    "format": "pdf",
    "includeCharts": true,
    "includeSummary": true
  },
  "isActive": true
}

### 21. Test Predictive Analytics
GET http://localhost:5111/api/analytics/predictions/Finance/efficiency?forecastPeriods=6
Authorization: Bearer {{token}}

### 22. Test Performance Comparison
POST http://localhost:5111/api/analytics/analysis/comparison
Authorization: Bearer {{token}}
Content-Type: application/json

{
  "departments": ["Finance", "HR", "Operations", "IT", "Compliance"],
  "metric": "efficiency",
  "startDate": "2024-12-01",
  "endDate": "2025-01-31"
}

### 23. Test Trend Analysis
POST http://localhost:5111/api/analytics/analysis/trends
Authorization: Bearer {{token}}
Content-Type: application/json

{
  "startDate": "2024-10-01",
  "endDate": "2025-01-31",
  "departments": ["Finance", "HR", "Operations"],
  "metrics": ["efficiency", "budget_utilization", "completion_rate"],
  "groupBy": "month",
  "analysisType": "trend",
  "includePredictions": true,
  "forecastPeriods": 3
}

### 24. Test Chart Generation
POST http://localhost:5111/api/export/charts/generate
Authorization: Bearer {{token}}
Content-Type: application/json

{
  "chartType": "line",
  "title": "Department Efficiency Trends",
  "xAxisLabel": "Month",
  "yAxisLabel": "Efficiency %",
  "width": 800,
  "height": 400,
  "showLegend": true,
  "showGrid": true,
  "dataSeries": [
    {
      "name": "Finance",
      "color": "#007bff",
      "data": [
        {"label": "Oct", "value": 85.5},
        {"label": "Nov", "value": 87.2},
        {"label": "Dec", "value": 89.1},
        {"label": "Jan", "value": 91.0}
      ]
    },
    {
      "name": "HR",
      "color": "#28a745",
      "data": [
        {"label": "Oct", "value": 82.3},
        {"label": "Nov", "value": 84.1},
        {"label": "Dec", "value": 86.7},
        {"label": "Jan", "value": 88.5}
      ]
    }
  ]
}

### 25. Test Get Scheduled Reports
GET http://localhost:5111/api/export/scheduled
Authorization: Bearer {{token}}

### 26. Test Export History
GET http://localhost:5111/api/export/history?limit=10
Authorization: Bearer {{token}}

### Phase 4 Test Summary
# This HTTP file tests all major Phase 4 features:
# ✅ Executive Dashboard & Analytics
# ✅ Real-time KPIs and Metrics  
# ✅ Trend Analysis & Predictions
# ✅ Multi-format Export (PDF, Excel, CSV)
# ✅ Email Notifications
# ✅ Scheduled Reports
# ✅ Chart Generation
# ✅ Performance Comparisons
# ✅ Business Intelligence

# Email configured for: biyelaayanda3@gmail.com
# Application running on: http://localhost:5111
